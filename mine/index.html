<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Minesweeper AI</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="layout">
    <div class="boardWrap">
      <!-- 这里是始终显示的区域 -->
      <div class="persistent-controls">
        <button id="btnNewGame" class="btn-primary">New Game</button>
        <button id="btnStepSolve" class="btn-secondary">Step Solve</button>
        <button id="btnUndo" class="btn-secondary" style="display: none;">Undo Last Move</button>
        <button id="btnSwitchKernel" class="btn-secondary">Switch to C++ Kernel</button>
        
        <!-- 显眼的折叠展开按钮放在左边 -->
        <button id="togglePanel" class="toggle-panel-btn prominent">⚙️ SETTINGS ▼</button>
        
        <div id="info" class="info-panel"></div>
      </div>

      <!-- 控制面板只包含可折叠的内容 - 默认收起 -->
        <div class="controls-container collapsed" style="display: none;">

        <div class="main-controls">
          <!-- First Move 选择框 -->
          <div class="checkbox-group">
            <input type="checkbox" id="firstzero" checked>
            <label for="firstzero">First Zero</label>
          </div>
          
          <!-- 难度按钮组放在 First Zero 下面 -->
          <div class="difficulty-buttons">
            <button id="btnEasy" class="btn-difficulty">Easy</button>
            <button id="btnNormal" class="btn-difficulty">Normal</button>
            <button id="btnHard" class="btn-difficulty">Hard</button>
            <button id="btnTranspose" class="btn-difficulty">Transpose</button>
          </div>
          
          <div class="size-controls">
            <div class="input-group">
              <label>H</label>
              <button id="btnHMinus5" class="adjust-btn small">-5</button>
              <button id="btnHMinus1" class="adjust-btn tiny">-</button>
              <input id="inpH" type="number" min="5" value="25">
              <button id="btnHPlus1" class="adjust-btn tiny">+</button>
              <button id="btnHPlus5" class="adjust-btn small">+5</button>
            </div>

            <div class="input-group">
              <label>W</label>
              <button id="btnWMinus5" class="adjust-btn small">-5</button>
              <button id="btnWMinus1" class="adjust-btn tiny">-</button>
              <input id="inpW" type="number" min="5" value="40">
              <button id="btnWPlus1" class="adjust-btn tiny">+</button>
              <button id="btnWPlus5" class="adjust-btn small">+5</button>
            </div>

            <div class="input-group">
              <label>M</label>
              <button id="btnMMinus100" class="adjust-btn small">-100</button>
              <button id="btnMMinus10" class="adjust-btn tiny">-10</button>
              <button id="btnMMinus1" class="adjust-btn tiny">-</button>
              <input id="inpM" type="number" min="1" value="200">
              <button id="btnMPlus1" class="adjust-btn tiny">+</button>
              <button id="btnMPlus10" class="adjust-btn tiny">+10</button>
              <button id="btnMPlus100" class="adjust-btn small">+100</button>
            </div>

            <!-- 种子输入框加宽 -->
            <div class="input-group">
              <label>Seed</label>
              <input id="inpSeed" type="number" placeholder="(opt)" class="seed-input wide">
            </div>
          </div>
          
          <div class="scale-controls">
            
            <div class="scale-group">
              <span class="scale-label">Cell:</span>
              <button id="btnCellScaleDown" class="scale-btn">−</button>
              <span id="cellScaleValue" class="scale-value">130%</span>
              <button id="btnCellScaleUp" class="scale-btn">+</button>
            </div>
          </div>
        </div>
      </div>
      
      <div id="status" class="status">Loading Pyodide...</div>
      <div id="board" class="board" aria-label="minesweeper board"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/pyodide/v0.26.4/full/pyodide.js"></script>
  <script async src="./cpp/minesweeper.js"></script>
  
  <script type="module" src="./app.js"></script>
</body>
</html>
